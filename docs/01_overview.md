
# 프로젝트 개요

> AI에게 전달 시 이 문서를 가장 먼저 읽게 하세요.

---

## 1. 기본 정보

| 항목 | 내용 |
|------|------|
| 프로젝트명 | 만톡: AI 사주 챗봇 |
| 버전 | v0.1.0 (MVP) |
| 작성일 | 2025-12-01 |
| 작성자 | (나중에 수정) |

---

## 2. 한 줄 요약

> 사용자가 생년월일과 출생시간만 입력하면 만세력을 자동으로 계산하고,  
> Gemini 기반 AI와 채팅하면서 사주를 상담받을 수 있는 Flutter 모바일 앱

---

## 3. 문제 정의

### 3.1 현재 문제

- 일반 사용자는 **만세력(연/월/일/시주, 대운/세운 등)**을 직접 계산하거나 읽기가 어렵다.
- 기존 사주 앱들은 대부분
  - 한 번에 긴 텍스트 리포트를 쏟아내고,
  - 사용자가 **추가 질문을 하면서 파고들 수 있는 대화형 구조가 약하다.**
- “올해 이직해도 될까?”, “이 사람이랑 잘 맞을까?” 같은 **현실적인 고민**을
  - 상황 설명 + 사주 관점으로 같이 풀어줄 수 있는 **상담형 경험**이 부족하다.
- 결과를 맹신하면 안 된다는 **주의/가이드**가 정리되어 있지 않아,
  - 어떤 사람은 너무 믿고,
  - 어떤 사람은 너무 가볍게 보고,
  - 서비스가 주는 **심리적/정보적 가치가 애매하다.**

### 3.2 해결 방법

- 앱이 사용자의 **생년월일, 출생시간, 출생지, 성별**을 받아  
  만세력을 자동 계산하거나, 외부 만세력 API를 통해 **구조화된 사주 데이터(JSON)**를 만든다.
- 이 만세력 데이터를 **Gemini 3.0 Pro** LLM에 컨텍스트로 넣고,
  - 기본 성향/장점/주의점에 대한 **요약 리포트**를 제공하고,
  - “올해 이직운 어때?”, “이 사람이랑 궁합 어때?” 같은 자연어 질문을 **채팅 형태로 계속 이어갈 수 있게** 한다.
- 앱 화면은 **“리포트 뷰”가 아니라 “채팅 뷰”를 메인으로** 두고,
  - 사주 내용은 채팅 중간에 **카드/요약 블록**으로만 끼워 넣어
  - 사용자가 진짜로 보는 것은 “나와 AI 역술인의 대화”가 되도록 한다.
- 대화 내내
  - “사주는 참고용입니다”, “최종 선택은 사용자 책임입니다”  
    같은 문구와 톤을 유지해 **과도한 맹신을 막는 가이드**를 함께 제공한다.

### 3.3 핵심 차별점 (vs 기존 사주 앱)

1. **대화 중심 UX**
   - 기존 앱: 입력 → 긴 리포트 한 번에 뿌리고 끝.
   - 이 앱: **채팅을 메인 화면으로** 사용해서,  
     사용자가 궁금한 걸 계속 물어보고, AI가 되묻기도 하면서 상담형으로 진행.

2. **만세력 = 백엔드 데이터, 대화 = 전면 UI**
   - 만세력/팔자/대운/세운 정보는 LLM 프롬프트에 들어가는 **숨은 데이터**로 사용.
   - 유저가 직접 보는 것은
     - 채팅 메시지,
     - 필요한 순간에만 나오는 **요약 카드/하이라이트**.

3. **컨텍스트를 기억하는 상담**
   - 과거 대화와 사주 데이터를 바탕으로,  
     “지난번에 이직 고민 얘기했었지?”처럼 **연속 상담 느낌**을 준다.

---


## 4. 목표 사용자

### 4.1 주요 타겟

| 구분 | 내용 |
|------|------|
| 연령대 | 20–40대 |
| 직업 | 직장인, 대학생, 취준생, 프리랜서 등 |
| 특징 | MBTI/별자리/타로 등 자기 이해 콘텐츠를 좋아하고, 점집까지 가기엔 부담스럽지만 가볍게 사주를 보고 싶어하는 사람 |

### 4.2 사용자 페르소나

**이름**: 지현 (가명)
**나이**: 29세
**직업**: IT 스타트업 마케터

**고민**:
- 올해 이직을 할지 말지 고민 중
- 연애/인간관계에서도 비슷한 패턴이 반복되는 느낌이라 원인과 방향을 알고 싶음

**니즈**:
- 출근길/잠들기 전 같은 짧은 시간에
- "이직, 연애, 돈" 관점에서 나를 이해하고
- 그때그때 떠오르는 고민을 편하게 물어볼 수 있는 AI 상담사

---



## 5. 핵심 기능 (MVP)

> 최소 기능 제품(MVP)에 포함될 기능만 나열  
> 우선순위: P0(필수) > P1(중요) > P2(있으면 좋음)

| 우선순위 | 기능명 | 설명 |
|----------|--------|------|
| P0 | 기본 프로필/생년월일 입력 | 생년월일, 출생시간, 성별, 출생지(선택)를 입력받고 기기 로컬에 저장 |
| P0 | 만세력 자동 계산 | 입력 정보를 바탕으로 연/월/일/시주, 십성, 대운/세운을 계산하거나 API로 가져와 JSON 구조로 저장 |
| P0 | 기본 사주 요약 리포트 | 성향, 강점/약점, 직업/연애/인간관계 등 핵심을 카드/섹션으로 요약해 보여줌 |
| P0 | 사주 챗봇 (Gemini) | 만세력 데이터를 컨텍스트로 사용해서, 사용자가 한국어로 질문하면 AI가 대화형으로 사주 상담 |
| P0 | 대화/리포트 히스토리 (로컬) | 최근 본 리포트와 채팅 기록 일부를 기기 안에 저장해 다시 열람 가능 |
| P1 | 여러 명 프로필 관리 | 나 / 연인 / 가족 / 친구 등 여러 사람의 사주를 등록하고 전환 |
| P1 | 계정/로그인 | Supabase Auth를 이용해 기기 간 프로필·대화 동기화 |
| P2 | 궁합 보기 | 두 사람의 사주를 기반으로 연애/협업 궁합 분석 |
| P2 | 알림/리마인드 | 생일, 대운/세운 전환 시점, “오늘의 한 줄 사주” 등 푸시 알림 |

---

## 6. 기술 스택

### 6.1 프론트엔드

| 항목 | 선택 | 비고 |
|------|------|------|
| 프레임워크 | Flutter | 단일 코드베이스로 Android/iOS 지원 |
| 상태관리 | **Riverpod 3.0** | @riverpod annotation 기반, 확장 가능한 구조 |
| 라우팅 | go_router | 인증/메인 ShellRoute 등 선언적 라우팅 |
| HTTP | Dio | 인터셉터로 인증/로깅 처리 |
| 로컬저장소 | Hive + flutter_secure_storage | 캐시/히스토리(Hive), 토큰/민감정보(secure storage) |

### 6.2 백엔드 (Supabase)

> 관계형 데이터 구조, SQL 쿼리, 비용 예측 가능성을 고려하여 Supabase 선택

| 항목 | 선택 | 비고 |
|------|------|------|
| BaaS | **Supabase** | PostgreSQL 기반, 관계형 데이터에 적합 |
| 서버리스 함수 | Supabase Edge Functions | Deno 기반, LLM 프록시/만세력 API 연동 |
| 인증 | Supabase Auth | 이메일+소셜 로그인(구글/애플/카카오) |
| DB | PostgreSQL (Supabase) | 프로필↔차트↔채팅 관계형 구조 |
| 스토리지 | Supabase Storage | 프로필 이미지 등 (추후) |
| 실시간 | Supabase Realtime | 채팅 실시간 업데이트 (선택) |

### 6.3 기타

| 항목 | 선택 | 비고 |
|------|------|------|
| 푸시알림 | OneSignal 또는 FCM | Supabase Edge Functions에서 호출 |
| 분석 | Mixpanel 또는 Amplitude | 사용자 행동 분석 |
| 광고 | (초기엔 없음, 추후 구독 모델 검토) | |
| LLM | **Google Gemini 3.0 Pro** | Edge Functions에서 호출 (2025.11 출시) |

---

## 7. 플랫폼 지원

- [x] Android
- [x] iOS
- [ ] Web
- [ ] Windows
- [ ] macOS

> 1차 목표는 모바일(안드로이드/아이폰)만.  
> Web/데스크톱은 나중에 운영툴/관리자 페이지용으로 고려.

---

## 8. 화면 목록 (예상)

| 화면명 | 설명 | 상세 명세 |
|--------|------|-----------|
| 스플래시 | 앱 로딩 및 초기 설정, 저장된 프로필/토큰 확인 | (추후 02_features/splash.md) |
| 온보딩 | 서비스 소개, “운세는 참고용입니다” 안내, 기본 동의 | 02_features/onboarding.md |
| 기본 정보 입력 | 생년월일, 출생시간, 성별, 출생지 입력 | 02_features/profile_input.md |
| 사주 요약 | 만세력 결과 기반 요약 리포트 표시 | 02_features/saju_summary.md |
| 사주 챗봇 | Gemini와 대화하며 사주 상담 | 02_features/saju_chat.md |
| 히스토리 | 과거 리포트/대화 기록 리스트 | 02_features/history.md |
| 설정 | 알림, 계정, 약관, 주의 문구 등 설정 | 02_features/settings.md |
| 로그인/회원가입 | 계정 생성 및 로그인 | 02_features/auth.md |

---

## 9. 제약 조건

### 9.1 하지 않을 것 (Out of Scope)

- 초기 MVP에서는 다음 기능을 **명확히 제외**한다.
  - 실제 인간 역술인과의 1:1 매칭/채팅/예약 기능
  - 유료 전화상담/영상상담 기능
  - 복잡한 궁합/택일(결혼 날짜, 이사 날짜 등) 세부 기능
  - 상세 재무/의료/법률 조언 (사주 결과를 근거로 한 현실 의사결정은 사용자 책임)

### 9.2 기술적 제약

- 언어: **한국어만 지원** (다국어는 추후 고려)
- 최소 지원 OS
  - Android 8.0 (API 26) 이상
  - iOS 14 이상
- 오프라인 동작
  - 기본 프로필/저장된 리포트는 로컬에서 읽기 가능
  - **LLM 기반 챗봇 기능은 인터넷 연결이 필수**

---

## 10. 참고 자료

### 10.1 벤치마킹 앱

- 기존 사주 앱들
  - 입력 플로우, 만세력 표시 방식, 요약 섹션 구조 참고
- 챗봇/상담 앱
  - 심리 상담 챗봇, 코칭 앱 등: 대화 UI, 추천 질문 버튼, 세션 구조 참고

### 10.2 디자인 참고

- Figma: (추후 링크 추가)
- 참고 이미지:
  - 기존 사주 앱의 메인 화면/리포트 화면 스크린샷
  - 챗봇 앱의 채팅 UI 스크린샷

---

## 체크리스트

AI에게 전달하기 전 확인:

- [x] 앱 이름과 한 줄 요약 작성
- [x] 목표 사용자 정의
- [x] MVP 핵심 기능 3개 이상 정의
- [x] 기술 스택 선택 완료
- [x] 지원 플랫폼 선택
- [x] 화면 목록 작성
