# 사담 (Sadam) - Google Play 배포 가이드

> **최종 업데이트**: 2025년 1월
> **Application ID**: `com.clickaround.sadam`
> **회사**: 어뮤니티 (ClickAround)

---

## 목차

1. [빌드 설정 (완료)](#1-빌드-설정-완료)
2. [Google Play Console 계정 설정](#2-google-play-console-계정-설정)
3. [Google Play Console에서 앱 만들기](#3-google-play-console에서-앱-만들기)
4. [스토어 등록정보 작성](#4-스토어-등록정보-작성)
5. [앱 콘텐츠 설정](#5-앱-콘텐츠-설정)
6. [~~비공개 테스트~~ (조직 계정 → 건너뛰기)](#6-비공개-테스트-신규-개발자-필수)
7. [AdMob 설정 및 연결](#7-admob-설정-및-연결)
8. [app-ads.txt 설정](#8-app-adstxt-설정)
9. [앱 번들 업로드](#9-앱-번들-업로드)
10. [프로덕션 출시](#10-프로덕션-출시)
11. [출시 후 체크리스트](#11-출시-후-체크리스트)
12. [버전 업데이트 방법](#12-버전-업데이트-방법)

> **참고**: 어뮤니티 조직 계정 보유 → 6단계(비공개 테스트 20명) **불필요**, 바로 프로덕션 출시 가능

---

## 1. 빌드 설정 (완료)

### 1.1 완료된 설정

| 항목 | 파일 | 상태 |
|------|------|------|
| Application ID | `android/app/build.gradle.kts` | `com.clickaround.sadam` |
| 키스토어 | `android/upload-keystore.jks` | 생성 완료 |
| 서명 설정 | `android/key.properties` | 설정 완료 |
| ProGuard | `android/app/proguard-rules.pro` | 생성 완료 |
| 네트워크 보안 | `android/app/src/main/res/xml/network_security_config.xml` | 생성 완료 |
| AdMob App ID | `AndroidManifest.xml` | `ca-app-pub-7140787344231420~3931921704` |
| 프라이버시 정책 | `docs/privacy_policy.html` | HTML 생성 완료 |

### 1.2 키스토어 정보 (절대 분실 금지!)

```
파일: android/upload-keystore.jks
비밀번호: clickaround2024
Alias: upload
```

### 1.3 빌드 명령어

```bash
cd frontend
flutter clean
flutter pub get
dart run build_runner build --delete-conflicting-outputs
flutter build appbundle --release
```

**빌드 결과**: `build/app/outputs/bundle/release/app-release.aab`

---

## 2. Google Play Console 계정 설정

### 2.1 개발자 계정 생성

1. https://play.google.com/console 접속
2. Google 계정으로 로그인
3. **개발자 계정 유형** 선택:
   - **개인**: 개인 개발자 (심사 더 엄격)
   - **조직**: 회사/법인 (추천 - 어뮤니티)
4. **등록 수수료**: $25 (1회 결제)
5. **개발자 배포 계약** 동의

### 2.2 계정 인증 (필수)

| 항목 | 개인 계정 | 조직 계정 |
|------|----------|----------|
| 본인 확인 | 신분증 | 대표자 신분증 |
| 주소 인증 | 우편물 인증 | 사업자등록증 |
| 전화번호 | 필수 | 필수 |
| D-U-N-S 번호 | 불필요 | 필요할 수 있음 |

### 2.3 조직 계정일 경우 준비 서류

- 사업자등록번호: `626-40-00870`
- 상호: 어뮤니티
- 대표: 김동현
- 주소: 서울특별시 은평구 통일로 742, 304호

---

## 3. Google Play Console에서 앱 만들기

### 3.1 앱 생성

1. Play Console → **모든 앱** → **앱 만들기**
2. 입력 항목:

| 항목 | 입력 값 |
|------|---------|
| 앱 이름 | 사담 - AI 사주 운세 |
| 기본 언어 | 한국어 (ko-KR) |
| 앱 / 게임 | 앱 |
| 무료 / 유료 | 선택 |

3. **개발자 프로그램 정책** 동의 체크
4. **앱 만들기** 클릭

---

## 4. 스토어 등록정보 작성

### 4.1 앱 세부정보

Play Console → **성장** → **스토어 등록정보** → **기본 스토어 등록정보**

| 항목 | 제한 | 예시 |
|------|------|------|
| **앱 이름** | 30자 이내 | `사담 - AI 사주 운세` |
| **간단한 설명** | 80자 이내 | 아래 참조 |
| **자세한 설명** | 4,000자 이내 | 아래 참조 |

**간단한 설명 (예시)**:
```
AI가 알려주는 나만의 사주 운세. 대화로 쉽고 재미있게 사주 상담을 받아보세요!
```

**자세한 설명 (예시)**:
```
사담은 AI 기반 대화형 사주 상담 서비스입니다.

기존 사주 앱들의 길고 어려운 리포트 대신, 친근한 AI와 대화하며 내 사주를 쉽게 이해할 수 있습니다.

[주요 기능]
- 만세력 기반 정밀 사주 계산
- AI 대화형 사주 상담
- 4가지 재미있는 페르소나 선택
- 오늘의 운세, 월운, 연운
- 궁합 분석

[사주 계산]
- 정밀 만세력 계산 (1900~2100년)
- 진태양시 보정 (전국 25개 도시)
- 음양력 변환, 서머타임, 야자시/조자시 처리
- 사주팔자, 오행, 십성, 신살, 12운성, 합충형파해

[AI 상담]
- 생년월일 입력만으로 상세한 사주 분석
- 궁금한 점을 대화로 질문
- 연애운, 재물운, 건강운 등 맞춤 상담

[개인정보 보호]
- 기기 내 로컬 저장 (Hive)
- 데이터 암호화 전송
- 앱 삭제 시 모든 데이터 자동 삭제

※ AI 사주 상담은 재미 목적이며, 중요한 의사결정의 참고 자료로만 활용해주세요.

문의: clickaround8@gmail.com
```

### 4.2 그래픽 자료 (필수)

| 항목 | 사이즈 | 형식 | 필수 |
|------|--------|------|------|
| **앱 아이콘** | 512 x 512 px | PNG (32-bit, 알파 포함) | 필수 |
| **기능 그래픽** | 1024 x 500 px | PNG 또는 JPG | 필수 |
| **폰 스크린샷** | 1080 x 1920 px (권장) | PNG 또는 JPG | 최소 2장, 최대 8장 |
| **태블릿 스크린샷** | 1200 x 1920 px (권장) | PNG 또는 JPG | 선택 |

> **스크린샷 팁**: 에뮬레이터에서 `flutter screenshot` 명령어 또는 Android Studio의 스크린 캡처 사용

### 4.3 카테고리 및 연락처

| 항목 | 값 |
|------|-----|
| 앱 카테고리 | 라이프스타일 또는 엔터테인먼트 |
| 이메일 | clickaround8@gmail.com |
| 웹사이트 | (개발자 웹사이트 URL) |
| 전화번호 | (선택) |

---

## 5. 앱 콘텐츠 설정

Play Console → **정책** → **앱 콘텐츠**

이 섹션의 **모든 항목을 완료**해야 앱을 출시할 수 있습니다.

### 5.1 개인정보처리방침 (필수)

1. **프라이버시 정책 URL 입력**
2. `docs/privacy_policy.html`을 웹에 호스팅 후 URL 입력
3. 호스팅 방법:
   - **GitHub Pages**: 저장소 Settings → Pages → /docs 폴더
   - **Notion**: Share → Publish to web
   - **Firebase Hosting**: `firebase init hosting` → public 폴더에 배치

### 5.2 앱 액세스 (필수)

```
질문: 앱의 일부 또는 전체 기능이 제한되어 있나요?
→ "아니요, 특별한 액세스 권한이 필요하지 않습니다" 선택
   (로그인 없이 사용 가능한 경우)
```

### 5.3 광고 (필수)

```
질문: 앱에 광고가 포함되어 있나요?
→ "예, 앱에 광고가 포함되어 있습니다" 선택
   (AdMob 사용하므로)
```

> 스토어 등록정보에 "광고 포함" 라벨이 자동 표시됩니다.

### 5.4 콘텐츠 등급 (필수)

1. **콘텐츠 등급** → **설문조사 시작**
2. 이메일 입력
3. **카테고리 선택**: "유틸리티, 생산성, 커뮤니케이션 등"
4. 설문 응답:

| 질문 | 답변 |
|------|------|
| 폭력적 콘텐츠 | 아니요 |
| 성적인 콘텐츠 | 아니요 |
| 비속어 | 아니요 |
| 약물 관련 | 아니요 |
| 사용자 생성 콘텐츠 | 아니요 |
| 위치 공유 | 아니요 |
| 구매 기능 | 아니요 (광고만) |
| 디지털 상품 구매 | 아니요 |

5. **등급 저장** → 자동 산정된 등급 확인
   - 예상 등급: **전체이용가** 또는 **12세 이용가**

### 5.5 타겟층 및 콘텐츠 (필수)

```
질문: 타겟 연령대는?
→ "13세 이상" 또는 "18세 이상" 선택
   (사주/운세 특성상 13세 이상 권장)

질문: 어린이의 관심을 끌 수 있나요?
→ "아니요" 선택
```

### 5.6 데이터 안전 (필수 - 가장 중요!)

Play Console → **앱 콘텐츠** → **데이터 보안**

#### Step 1: 데이터 수집 여부

```
질문: 앱이 필수 사용자 데이터 유형을 수집하거나 공유하나요?
→ "예" 선택
```

#### Step 2: 데이터 암호화

```
질문: 전송 중인 모든 사용자 데이터가 암호화되나요?
→ "예" 선택 (HTTPS 사용)
```

#### Step 3: 데이터 삭제 요청

```
질문: 사용자가 데이터 삭제를 요청할 방법이 있나요?
→ "예" 선택 (이메일: clickaround8@gmail.com)
```

#### Step 4: 수집하는 데이터 유형 선택

| 데이터 유형 | 수집 여부 | 공유 여부 | 목적 |
|------------|----------|----------|------|
| **이름** | 선택적 수집 | 공유 안 함 | 앱 기능 |
| **생년월일** | 필수 수집 | 공유 안 함 | 앱 기능 (사주 계산) |
| **성별** | 필수 수집 | 공유 안 함 | 앱 기능 |
| **대략적인 위치** | 선택적 수집 | 공유 안 함 | 앱 기능 (출생지) |
| **앱 활동 (앱 내 상호작용)** | 자동 수집 | 공유 안 함 | 분석 |
| **기기 또는 기타 ID** | 자동 수집 | 공유함 (광고) | 광고 |
| **진단 (비정상 종료 로그)** | 자동 수집 | 공유 안 함 | 앱 기능 |

#### Step 5: 각 데이터에 대한 세부 질문

각 데이터 유형마다:
- **수집 목적**: 앱 기능, 분석, 광고 중 선택
- **사용자가 선택적인지**: 예/아니요
- **암호화 여부**: 예

#### 최종 확인 후 **저장**

### 5.7 정부 앱 (필수)

```
질문: 이 앱이 정부 앱인가요?
→ "아니요" 선택
```

### 5.8 금융 기능 (필수)

```
질문: 앱에 금융 기능이 있나요?
→ "아니요" 선택
```

### 5.9 건강 앱 (필수)

```
질문: 이 앱이 건강 앱인가요?
→ "아니요" 선택
```

---

## 6. 비공개 테스트 (신규 개발자 필수)

> **2023년 11월 이후 생성된 개인 계정**은 프로덕션 출시 전 비공개 테스트가 **필수**입니다.
> 조직 계정은 이 단계가 불필요할 수 있습니다.

### 6.1 요구사항

| 항목 | 조건 |
|------|------|
| 테스터 수 | **최소 12명** (실제로는 20명 권장) |
| 테스트 기간 | **최소 14일** 연속 참여 |
| 다운로드 | 테스터가 **실제로 앱을 다운로드**해야 함 |
| 테스트 유형 | **비공개 (Closed) 테스트** |

### 6.2 비공개 테스트 설정

1. Play Console → **출시** → **테스트** → **비공개 테스트**
2. **새 릴리스 만들기**
3. `app-release.aab` 업로드
4. 릴리스 노트 작성
5. **검토 및 출시**

### 6.3 테스터 관리

1. Play Console → **테스트** → **비공개 테스트** → **테스터 관리**
2. **이메일 목록 만들기**
3. 테스터 이메일 주소 추가 (12~20명)
4. 테스터에게 **참여 링크** 공유
5. 테스터가 링크 클릭 → Google Play에서 앱 다운로드

### 6.4 프로덕션 액세스 신청

테스트 14일 완료 후:
1. Play Console 대시보드에서 **프로덕션 액세스 신청**
2. 간단한 설문 답변
3. **2~3일 후** 프로덕션 출시 권한 부여

---

## 7. AdMob 설정 및 연결

### 7.1 AdMob 계정 설정

1. https://admob.google.com 접속
2. AdMob 계정 로그인
3. **결제 정보** 등록 (수익 받으려면 필수)

### 7.2 앱 등록

1. AdMob → **앱** → **앱 추가**
2. **게시됨** 선택 (Play Store에 업로드 후)
3. Google Play에서 앱 검색 → 연결

| 항목 | 값 |
|------|-----|
| 플랫폼 | Android |
| 앱 이름 | 사담 |
| App ID | `ca-app-pub-7140787344231420~3931921704` |

### 7.3 광고 단위 생성

| 광고 유형 | 용도 | 추천 |
|----------|------|------|
| **배너** | 화면 하단 고정 | MVP |
| **전면** | 화면 전환 시 | 선택 |
| **보상형** | 사용자 보상 제공 | 선택 |
| **네이티브** | 콘텐츠에 자연스럽게 삽입 | 선택 |

각 광고 단위를 만들면 **광고 단위 ID**가 발급됩니다.
→ 앱 코드에서 이 ID를 사용합니다.

### 7.4 AndroidManifest.xml 확인 (완료)

```xml
<!-- 이미 설정됨 -->
<meta-data
    android:name="com.google.android.gms.ads.APPLICATION_ID"
    android:value="ca-app-pub-7140787344231420~3931921704"/>
```

---

## 8. app-ads.txt 설정

> **2025년 1월부터 필수!** app-ads.txt가 없으면 광고 게재가 제한됩니다.

### 8.1 app-ads.txt 파일 생성

AdMob → **앱** → **app-ads.txt** 탭에서 코드 스니펫 복사.

기본 형식:
```
google.com, pub-7140787344231420, DIRECT, f08c47fec0942fa0
```

> `pub-7140787344231420`은 AdMob 게시자 ID입니다.
> 실제 ID는 AdMob → 설정 → 계정 정보에서 확인하세요.

### 8.2 파일 호스팅

개발자 웹사이트의 **루트**에 배치:
```
https://your-website.com/app-ads.txt
```

### 8.3 Google Play Console에 웹사이트 등록

1. Play Console → **스토어 등록정보** → **스토어 설정**
2. **개발자 연락처 정보** → **웹사이트** 입력
3. 이 URL의 도메인이 app-ads.txt가 호스팅된 도메인과 일치해야 함

### 8.4 웹사이트가 없는 경우

**Firebase Hosting** 사용 (무료):
```bash
# Firebase CLI 설치
npm install -g firebase-tools

# 프로젝트 초기화
firebase login
firebase init hosting

# public 폴더에 app-ads.txt 배치
# firebase.json 설정 후 배포
firebase deploy --only hosting
```

또는 **GitHub Pages** 사용:
1. GitHub 저장소 생성 (예: `clickaround.github.io`)
2. 루트에 `app-ads.txt` 파일 추가
3. Settings → Pages 활성화

### 8.5 확인

- AdMob이 app-ads.txt를 크롤링하는 데 **최대 24시간** 소요
- AdMob → 앱 → app-ads.txt 상태에서 확인

---

## 9. 앱 번들 업로드

### 9.1 내부 테스트 트랙 (먼저 권장)

1. Play Console → **출시** → **테스트** → **내부 테스트**
2. **새 릴리스 만들기**
3. **Google Play 앱 서명 사용** 동의
4. `app-release.aab` 드래그 앤 드롭
5. 릴리스 노트 작성:
```
v1.0.0 - 초기 릴리스
- AI 대화형 사주 상담
- 정밀 만세력 계산
- 4가지 페르소나 선택
```
6. **검토 시작** 클릭

### 9.2 Google Play 앱 서명 (자동)

첫 AAB 업로드 시 Google Play 앱 서명에 자동 등록됩니다.
- **업로드 키**: 우리가 만든 `upload-keystore.jks`
- **앱 서명 키**: Google이 관리 (더 안전)

---

## 10. 프로덕션 출시

### 10.1 출시 전 최종 확인

Play Console 대시보드에서 모든 항목이 **녹색 체크**인지 확인:

| 항목 | 상태 |
|------|------|
| 스토어 등록정보 | 완료 |
| 앱 콘텐츠 (모든 섹션) | 완료 |
| 콘텐츠 등급 | 완료 |
| 데이터 안전 | 완료 |
| 가격 및 배포 지역 | 완료 |
| 앱 번들 업로드 | 완료 |

### 10.2 프로덕션 릴리스 생성

1. Play Console → **출시** → **프로덕션**
2. **새 릴리스 만들기**
3. 테스트에서 승격하거나 새 AAB 업로드
4. **릴리스 노트** 작성
5. **출시 검토 시작**

### 10.3 단계적 출시 (권장)

```
단계적 출시 비율:
5% → 10% → 25% → 50% → 100%
```

- 처음엔 5~10% 사용자에게만 배포
- 문제 없으면 비율 점진적 확대
- 심각한 문제 발견 시 즉시 출시 중단 가능

### 10.4 심사 기간

| 항목 | 기간 |
|------|------|
| 첫 제출 심사 | 약 **3~7일** |
| 업데이트 심사 | 약 **1~3일** |
| 신규 개발자 계정 | 더 오래 걸릴 수 있음 |

---

## 11. 출시 후 체크리스트

### 11.1 즉시 확인

- [ ] Google Play에서 앱 검색 가능한지 확인
- [ ] 다운로드 & 설치 테스트
- [ ] 광고 정상 노출 확인
- [ ] 비정상 종료 없는지 Firebase Crashlytics 확인

### 11.2 1주차

- [ ] 사용자 리뷰 확인 및 답변
- [ ] 비정상 종료율 모니터링 (목표: 1% 이하)
- [ ] ANR 비율 확인 (목표: 0.5% 이하)
- [ ] AdMob 수익 확인

### 11.3 지속적 관리

- [ ] 정기 업데이트 (2주~1개월)
- [ ] 사용자 피드백 반영
- [ ] targetSdkVersion 최신 유지 (Google Play 요구사항)
- [ ] 프라이버시 정책 최신 유지
- [ ] 데이터 안전 양식 최신 유지

---

## 12. 버전 업데이트 방법

### 12.1 버전 올리기

`pubspec.yaml` 수정:
```yaml
# 형식: major.minor.patch+buildNumber
version: 1.0.1+2    # 버그 수정
version: 1.1.0+3    # 기능 추가
version: 2.0.0+4    # 대규모 변경
```

### 12.2 업데이트 빌드 & 업로드

```bash
cd frontend
flutter clean
flutter pub get
dart run build_runner build --delete-conflicting-outputs
flutter build appbundle --release
```

### 12.3 Play Console에 업로드

1. Play Console → **프로덕션** → **새 릴리스 만들기**
2. 새 AAB 업로드
3. 릴리스 노트 작성 (변경사항 명시)
4. **검토 시작**

---

## 부록: 전체 순서 요약

```
[ 1단계: 빌드 설정 ]           ← 완료!
        │
        ▼
[ 2단계: 개발자 계정 생성 ]     ← $25 결제, 인증
        │
        ▼
[ 3단계: 프라이버시 정책 호스팅 ] ← GitHub Pages / Notion / Firebase
        │
        ▼
[ 4단계: Play Console에서 앱 만들기 ]
        │
        ▼
[ 5단계: 스토어 등록정보 작성 ]   ← 앱 이름, 설명, 스크린샷, 아이콘
        │
        ▼
[ 6단계: 앱 콘텐츠 설정 ]       ← 프라이버시, 광고, 등급, 데이터 안전
        │
        ▼
[ 7단계: AAB 업로드 ]           ← 내부 테스트 → 비공개 테스트
        │
        ▼
[ 8단계: 비공개 테스트 14일 ]    ← 신규 개인 계정만 필수
        │
        ▼
[ 9단계: AdMob 앱 연결 ]        ← Play Store 게시 후
        │
        ▼
[ 10단계: app-ads.txt 설정 ]    ← 개발자 웹사이트 필요
        │
        ▼
[ 11단계: 프로덕션 출시 ]       ← 심사 3~7일
        │
        ▼
[ 12단계: 출시 완료! ]          ← 모니터링 시작
```

---

## 부록: 준비물 체크리스트

### 반드시 필요한 것

- [x] 앱 번들 (.aab)
- [x] 앱 서명 키스토어
- [x] AdMob App ID
- [x] 개인정보처리방침 HTML
- [ ] Google Play 개발자 계정 ($25)
- [ ] 앱 아이콘 (512x512 PNG)
- [ ] 기능 그래픽 (1024x500 PNG)
- [ ] 스크린샷 (1080x1920 PNG, 최소 2장)
- [ ] 프라이버시 정책 호스팅 URL
- [ ] 개발자 웹사이트 URL (app-ads.txt용)

### 선택 사항

- [ ] 프로모션 동영상 (YouTube URL)
- [ ] 태블릿 스크린샷
- [ ] 다국어 스토어 등록정보

---

## 참고 문서

- [Flutter Android 배포 공식 가이드](https://docs.flutter.dev/deployment/android)
- [Google Play Console 앱 만들기](https://support.google.com/googleplay/android-developer/answer/9859152?hl=ko)
- [스토어 등록정보 권장사항](https://support.google.com/googleplay/android-developer/answer/13393723?hl=ko)
- [콘텐츠 등급 설정](https://support.google.com/googleplay/android-developer/answer/9898843?hl=ko)
- [데이터 안전 양식](https://support.google.com/googleplay/android-developer/answer/10787469?hl=ko)
- [비공개 테스트 요구사항](https://support.google.com/googleplay/android-developer/answer/14151465?hl=ko)
- [AdMob 앱 설정](https://support.google.com/admob/answer/9989980?hl=ko)
- [app-ads.txt 설정](https://support.google.com/admob/answer/9363762?hl=ko)
- [검토를 위한 앱 준비](https://support.google.com/googleplay/android-developer/answer/9859455?hl=ko)
