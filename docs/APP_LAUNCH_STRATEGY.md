# 만톡 앱 런칭 전략 및 구현 로드맵

> 작성일: 2025-12-02
> 목표: AI 사주 챗봇 앱 정식 런칭

---

## 1. 앱 컨셉 및 차별점

### 포스텔러 만세력 vs 만톡

| 구분 | 포스텔러 만세력 | 만톡 |
|------|----------------|------|
| 핵심 기능 | 만세력 조회 (정적 결과) | AI 대화형 사주 상담 |
| UX | 결과 페이지 → 읽기 | 채팅 → 질문/답변 |
| 재사용성 | 조회 후 종료 | 지속적 대화, 히스토리 |
| 개인화 | 없음 | AI가 맥락 기억, 맞춤 답변 |

### 만톡의 핵심 가치
```
"긴 리포트를 읽는 대신, AI와 대화하며 내 사주를 이해한다"
```

**예시 시나리오:**
1. 사용자: 프로필 입력 (1997/11/29, 08:03, 창원, 남자)
2. AI: "박재현님의 사주를 분석했습니다. 을해(乙亥)년 정해(丁亥)월에 태어나셨네요..."
3. 사용자: "2026년에 결혼할 상대 만날 수 있을까?"
4. AI: "2026년은 병오(丙午)년입니다. 박재현님의 일주 을묘와..." (맥락 기반 답변)

---

## 2. 화면 구조 (User Flow)

```
┌─────────────────────────────────────────────────────────────┐
│                        만톡 앱 Flow                          │
└─────────────────────────────────────────────────────────────┘

[스플래시] → [온보딩] → [프로필 입력] → [메인: 채팅]
     │                        ↓
     │                   [프로필 확인]
     │                        ↓
     └──────────────────→ [채팅 화면] ←──── [히스토리]
                              ↓
                         [설정/프로필 관리]
```

### 2.1 스플래시 (Splash)
- 앱 로고 + 브랜드명 "만톡"
- 로컬 데이터 로드 (Hive)
- 자동 라우팅: 온보딩 완료 여부 체크

### 2.2 온보딩 (Onboarding) - 3페이지
```
[1] "AI와 대화하며 알아보는 내 사주"
    - 채팅 일러스트

[2] "정확한 만세력 계산"
    - 진태양시, 절입시간 보정 강조

[3] "사주는 참고용입니다"
    - 면책 고지 (필수)
    - "시작하기" 버튼
```

### 2.3 프로필 입력 (Profile Input) ⭐ P0
```
┌─────────────────────────────────────┐
│  프로필 만들기                        │
├─────────────────────────────────────┤
│  이름                                │
│  [________________] (최대 12자)       │
│                                      │
│  성별                                │
│  [  여자  ] [  남자  ]                │
│                                      │
│  생년월일시                           │
│  [양력▼] [1997/11/29] [08:03]        │
│  ○ 시간 모름  ○ 야자시/조자시 ⓘ      │
│                                      │
│  출생 도시                            │
│  [경상남도 창원시, 대한민국    🔍]     │
│                                      │
│  ┌─────────────────────────────────┐ │
│  │ 입력하신 지역에 따라 -26분 보정   │ │
│  └─────────────────────────────────┘ │
│                                      │
│  [        다음으로        ]          │
└─────────────────────────────────────┘
```

**입력 필드:**
- 이름: 텍스트 (필수, 12자 제한)
- 성별: 토글 버튼 (필수)
- 양력/음력: 드롭다운
- 생년월일: DatePicker
- 시간: TimePicker + "시간 모름" 체크박스
- 야자시/조자시: 체크박스 + 툴팁 설명
- 도시: 검색 + 자동완성 (25개 도시)

### 2.4 프로필 확인 (Profile Confirm)
```
┌─────────────────────────────────────┐
│  입력하신 프로필을 확인해주세요       │
├─────────────────────────────────────┤
│  👤 박재현 / 남자                    │
│  📅 양 1997/11/29 08:03             │
│  📍 경상남도 창원시, 대한민국         │
│                                      │
│  ⚠️ 입력하신 지역 정보에 따라        │
│     -26분을 보정합니다.              │
│                                      │
│  [      만세력 보러가기      ]       │
│  [      프로필 수정하기      ]       │
└─────────────────────────────────────┘
```

### 2.5 채팅 화면 (Saju Chat) ⭐ P0 핵심
```
┌─────────────────────────────────────┐
│  ← 만톡        박재현 ▼    ☰        │
├─────────────────────────────────────┤
│                                      │
│  ┌─ AI ──────────────────────────┐  │
│  │ 박재현님, 안녕하세요! 🙏        │  │
│  │                                │  │
│  │ 양력 1997년 11월 29일 08:03    │  │
│  │ 창원시에서 태어나셨군요.        │  │
│  │                                │  │
│  │ 사주를 분석해보니...           │  │
│  │ 정해(丁亥)년 신해(辛亥)월       │  │
│  │ 을묘(乙卯)일 기묘(己卯)시       │  │
│  │                                │  │
│  │ 궁금한 점을 물어보세요!        │  │
│  └────────────────────────────────┘  │
│                                      │
│  ┌─ 추천 질문 ─────────────────────┐ │
│  │ [올해 운세] [재물운] [연애운]   │ │
│  │ [직장운] [건강운] [2026년 운세] │ │
│  └─────────────────────────────────┘ │
│                                      │
│  ┌─ 나 ──────────────────────────┐  │
│  │ 2026년에 결혼할 상대 만날 수   │  │
│  │ 있을까?                        │  │
│  └────────────────────────────────┘  │
│                                      │
│  ┌─ AI ──────────────────────────┐  │
│  │ 2026년은 병오(丙午)년입니다.   │  │
│  │                                │  │
│  │ 박재현님의 일주 을묘와 병오년의│  │
│  │ 관계를 보면...                 │  │
│  │                                │  │
│  │ [사주 요약 보기 📊]            │  │
│  └────────────────────────────────┘  │
│                                      │
├─────────────────────────────────────┤
│  [궁금한 점을 물어보세요...    ] 📤 │
└─────────────────────────────────────┘
```

**핵심 기능:**
1. AI 인사 메시지 (사주 요약 포함)
2. 추천 질문 칩 (탭하면 자동 전송)
3. 대화형 UI (채팅 버블)
4. 사주 요약 바텀시트 (탭하면 표시)
5. 프로필 전환 (상단 드롭다운)
6. 면책 배너 (하단 고정)

### 2.6 사주 요약 바텀시트
```
┌─────────────────────────────────────┐
│  ─────  (drag handle)               │
│                                      │
│  📊 박재현님의 사주팔자               │
│                                      │
│  ┌────┬────┬────┬────┐              │
│  │시주│일주│월주│년주│              │
│  ├────┼────┼────┼────┤              │
│  │기  │을  │신  │정  │ 천간         │
│  │己  │乙  │辛  │丁  │              │
│  ├────┼────┼────┼────┤              │
│  │묘  │묘  │해  │해  │ 지지         │
│  │卯  │卯  │亥  │亥  │              │
│  └────┴────┴────┴────┘              │
│                                      │
│  일간: 을목(乙木) - 섬세하고 유연한   │
│  오행 분포: 목3, 화1, 토1, 금1, 수2   │
│                                      │
│  [닫기]                              │
└─────────────────────────────────────┘
```

### 2.7 히스토리 (History)
- 과거 대화 세션 목록
- 날짜/프로필별 분류
- 탭하면 해당 세션 복원

### 2.8 설정 (Settings)
- 프로필 관리 (추가/수정/삭제)
- 알림 설정 (추후)
- 이용약관/면책조항
- 앱 버전 정보

---

## 3. 기술 구현 로드맵

### Phase 1: MVP 코어 (2주)

```
Week 1: 기반 + Profile
├── Day 1-2: Core 완성 (errors, utils, validators)
├── Day 3-4: Profile Feature 전체 구현
│   ├── Domain: SajuProfile Entity
│   ├── Data: Hive 저장
│   └── Presentation: 입력/확인 화면
└── Day 5: 도시 검색 + 진태양시 보정 표시

Week 2: Chat + AI 연동
├── Day 1-2: Chat UI 구현
│   ├── 채팅 버블 컴포넌트
│   ├── 추천 질문 칩
│   └── 사주 요약 바텀시트
├── Day 3-4: AI 연동 (Mock → Gemini)
│   ├── 시스템 프롬프트 설계
│   ├── 사주 컨텍스트 주입
│   └── 스트리밍 응답
└── Day 5: 테스트 + 버그 수정
```

### Phase 2: 완성도 (1주)

```
Week 3: 나머지 화면 + 폴리싱
├── Day 1: Splash + Onboarding
├── Day 2: History 화면
├── Day 3: Settings 화면
├── Day 4: 에러 처리 + 로딩 상태
└── Day 5: UI 폴리싱 + 테스트
```

### Phase 3: 런칭 준비 (1주)

```
Week 4: 배포 준비
├── Day 1-2: Supabase 연동 (선택적)
├── Day 3: 앱 아이콘 + 스플래시 디자인
├── Day 4: Android/iOS 빌드 + 테스트
└── Day 5: 스토어 등록 준비
```

---

## 4. AI 시스템 프롬프트 설계

### 4.1 Gemini 시스템 프롬프트

```
당신은 "만톡"의 AI 사주 상담사입니다.

## 역할
- 사용자의 사주팔자를 바탕으로 친절하게 상담
- 전통 사주명리학 지식을 현대적으로 해석
- 긍정적이고 희망적인 톤 유지

## 사용자 정보
- 이름: {name}
- 성별: {gender}
- 생년월일시: {birthDateTime} ({calendar})
- 출생지: {city}
- 사주팔자: {yearPillar} {monthPillar} {dayPillar} {hourPillar}
- 일간(일주 천간): {dayMaster}
- 오행 분포: {ohengDistribution}

## 응답 규칙
1. 사주 용어 사용 시 쉬운 설명 병기
2. 단정적 예언 금지 ("~할 것입니다" X → "~하는 기운이 있습니다" O)
3. 부정적 내용도 희망적 조언과 함께 전달
4. 면책: "사주는 참고용이며 개인의 선택이 가장 중요합니다"

## 금지 사항
- 건강 진단/의료 조언
- 투자/재정 조언
- 범죄/불법 행위 관련
```

### 4.2 대화 컨텍스트 구조

```json
{
  "systemPrompt": "...",
  "sajuContext": {
    "profile": { ... },
    "chart": {
      "yearPillar": "정해",
      "monthPillar": "신해",
      "dayPillar": "을묘",
      "hourPillar": "기묘"
    },
    "analysis": {
      "dayMaster": "을목",
      "oheng": {"목": 3, "화": 1, "토": 1, "금": 1, "수": 2}
    }
  },
  "messages": [
    {"role": "assistant", "content": "인사 메시지..."},
    {"role": "user", "content": "2026년 결혼운..."},
    {"role": "assistant", "content": "답변..."}
  ]
}
```

---

## 5. 데이터 흐름

```
┌─────────────────────────────────────────────────────────────┐
│                      데이터 흐름                             │
└─────────────────────────────────────────────────────────────┘

[사용자 입력]
     │
     ▼
[SajuProfile] ──저장──→ [Hive (로컬)]
     │
     ▼
[SajuCalculationService]
     │
     ├─ 진태양시 보정
     ├─ 서머타임 보정
     ├─ 절입시간 처리
     └─ 사주팔자 계산
     │
     ▼
[SajuChart] ──캐시──→ [Hive (로컬)]
     │
     ▼
[ChatSession]
     │
     ├─ 시스템 프롬프트 + 사주 컨텍스트
     ├─ 사용자 메시지
     └─ AI 응답
     │
     ▼
[Gemini API] (Supabase Edge Function)
     │
     ▼
[ChatMessage] ──저장──→ [Hive (로컬)]
                          │
                          ▼ (선택적)
                     [Supabase DB]
```

---

## 6. 우선순위 및 체크리스트

### P0 (MVP 필수) - Week 1-2
- [ ] Profile 입력/확인 화면
- [ ] 만세력 계산 연동
- [ ] Chat UI 기본 구현
- [ ] AI 응답 (Mock → Gemini)
- [ ] 추천 질문 기능
- [ ] 사주 요약 바텀시트
- [ ] 로컬 저장 (Hive)

### P1 (완성도) - Week 3
- [ ] Splash 화면
- [ ] Onboarding (3페이지)
- [ ] History 화면
- [ ] Settings 화면
- [ ] 에러 처리 UI
- [ ] 로딩 인디케이터

### P2 (런칭) - Week 4
- [ ] 앱 아이콘/스플래시 디자인
- [ ] Android APK 빌드
- [ ] iOS IPA 빌드
- [ ] 플레이스토어 등록
- [ ] 앱스토어 등록

### P3 (추후)
- [ ] Supabase 연동
- [ ] 사용자 계정/로그인
- [ ] 궁합 보기
- [ ] 푸시 알림
- [ ] 프리미엄 기능

---

## 7. 예상 일정

| 주차 | 기간 | 목표 | 산출물 |
|------|------|------|--------|
| Week 1 | Day 1-5 | MVP 코어 (Profile) | 프로필 입력/저장 완료 |
| Week 2 | Day 6-10 | MVP 코어 (Chat) | AI 대화 가능한 앱 |
| Week 3 | Day 11-15 | 완성도 | 모든 화면 구현 |
| Week 4 | Day 16-20 | 런칭 | 스토어 등록 |

---

## 8. 리스크 및 대응

### 기술적 리스크

| 리스크 | 확률 | 영향 | 대응 |
|--------|------|------|------|
| 음양력 변환 부정확 | 중 | 고 | 외부 API 연동 or 정밀 테이블 |
| Gemini API 비용 | 중 | 중 | 일일 한도 설정, 캐싱 |
| 앱스토어 심사 거절 | 중 | 고 | 면책 고지 명확히, 가이드라인 준수 |

### 비즈니스 리스크

| 리스크 | 확률 | 영향 | 대응 |
|--------|------|------|------|
| 사용자 신뢰도 | 중 | 고 | 포스텔러와 결과 비교 검증 |
| 법적 이슈 (점술) | 저 | 고 | "오락/참고용" 명시, 면책 동의 |

---

## 9. 성공 지표 (KPI)

### 런칭 1개월 기준

| 지표 | 목표 |
|------|------|
| 다운로드 수 | 1,000+ |
| DAU (일일 활성 사용자) | 100+ |
| 평균 세션 시간 | 5분+ |
| 평균 대화 횟수/세션 | 5회+ |
| 앱스토어 평점 | 4.0+ |

---

## 10. 다음 액션 아이템

### 즉시 (오늘)
1. [ ] Profile Feature 구현 시작
2. [ ] 도시 목록 데이터 준비 (25개 + 검색)
3. [ ] 프로필 입력 UI (shadcn_ui)

### 이번 주
4. [ ] Profile 저장 (Hive)
5. [ ] 만세력 계산 연동
6. [ ] Chat UI 기본 구현

### 다음 주
7. [ ] Gemini API 연동
8. [ ] 시스템 프롬프트 테스트
9. [ ] 전체 플로우 테스트
