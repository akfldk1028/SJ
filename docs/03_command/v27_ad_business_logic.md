# ë§Œí†¡ v27 ê´‘ê³  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì •ë¦¬

**ì‘ì„±ì¼**: 2026-02-01
**ë²„ì „**: v27 (DK-CC + SONNY merge í†µí•©)

---

## 1. í˜„ì¬ ì½”ë“œ ì„¤ì •ê°’ (ì‹¤ì œ ì ìš© ì¤‘)

### ad_strategy.dart

| ì„¤ì • | ê°’ | ì„¤ëª… |
|------|-----|------|
| `inlineAdMessageInterval` | **2** | ë©”ì‹œì§€ 2ê°œë§ˆë‹¤ ê´‘ê³  1íšŒ |
| `inlineAdMaxCount` | **9999** | ì„¸ì…˜ë‹¹ ë¬´ì œí•œ |
| `inlineAdMinMessages` | **2** | 2ë²ˆì§¸ ë©”ì‹œì§€ë¶€í„° ê´‘ê³  ê°€ëŠ¥ |
| `chatAdType` | `nativeMedium` | ì±„íŒ… ë²„ë¸” ìŠ¤íƒ€ì¼ Native ê´‘ê³  |
| `interstitialCooldownSeconds` | **0** | ì¿¨ë‹¤ìš´ ì—†ìŒ |
| `interstitialDailyLimit` | **9999** | ë¬´ì œí•œ |

### ad_trigger_service.dart

| ìƒìˆ˜ | ê°’ | ìš©ë„ |
|------|-----|------|
| `impressionRewardTokens` | **1,500** | Native ê´‘ê³  impression ì‹œ ìë™ ë³´ìƒ |
| `intervalRewardTokens` | **500** | ì¸í„°ë²Œ ê´‘ê³  í´ë¦­ ì‹œ ë³´ìƒ |
| `depletedRewardTokens` | **3,000** | í† í° 100% ì†Œì§„ ì‹œ ë³´ìƒ (ê¸°ë³¸) |
| `depletedRewardTokensVideo` | **35,000** | ì˜ìƒ ê´‘ê³  ë³´ìƒ (5ì™•ë³µ) |
| `depletedRewardTokensNative` | **21,000** | ë„¤ì´í‹°ë¸Œ ê´‘ê³  ë³´ìƒ (3ì™•ë³µ) |
| `tokenWarningThreshold` | 80% | í† í° ê²½ê³  ì„ê³„ê°’ |
| `tokenDepletedThreshold` | 100% | í† í° ì†Œì§„ ì„ê³„ê°’ |
| `warningRewardTokens` | **0** | 80% ê²½ê³  ë¹„í™œì„±í™” |

### DB: user_daily_token_usage

| ì»¬ëŸ¼ | ì„¤ëª… |
|------|------|
| `daily_quota` | 20,000 (ë§¤ì¼ ë¦¬ì…‹) |
| `bonus_tokens` | ê´‘ê³  ë³´ìƒìœ¼ë¡œ ì ë¦½ (add_ad_bonus_tokens RPC) |
| `rewarded_tokens_earned` | ë³´ìƒí˜• ê´‘ê³ ë¡œ ì ë¦½ (trackRewarded) |
| `is_quota_exceeded` | `chatting_tokens >= (daily_quota + bonus_tokens + rewarded_tokens_earned)` |

---

## 2. ê´‘ê³  íë¦„ (3ê°€ì§€ ê²½ë¡œ)

### ê²½ë¡œ A: ì¸í„°ë²Œ Native ê´‘ê³  (ë§¤ 2 ë©”ì‹œì§€)

```
ìœ ì € ë©”ì‹œì§€ 2ê°œ ì „ì†¡
    â†“
checkAndTrigger() â†’ intervalAd
    â†“
Native ê´‘ê³  ë¡œë“œ & í‘œì‹œ (ì±„íŒ… ë²„ë¸” ìŠ¤íƒ€ì¼)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ìë™] onAdImpression ë°œë™                    â”‚
â”‚   â†’ trackNativeImpression() (DB ì¹´ìš´í„°)       â”‚
â”‚   â†’ state.rewardedTokens = 1,500             â”‚
â”‚   â†’ _saveBonusToServer(1,500) â† v27 ì¶”ê°€     â”‚
â”‚     (add_ad_bonus_tokens RPC ì¦‰ì‹œ í˜¸ì¶œ)       â”‚
â”‚   â†’ "ëŒ€í™” ì¬ê°œ (+1,500 í† í° íšë“!)" ë²„íŠ¼ í‘œì‹œ  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“ (ìœ ì €ê°€ ê´‘ê³  í´ë¦­ ì‹œ ì¶”ê°€)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ì„ íƒ] onAdClicked ë°œë™                       â”‚
â”‚   â†’ trackNativeClick() (DB ì¹´ìš´í„°)            â”‚
â”‚   â†’ rewardedTokens += 1,500 (ì´ 3,000)       â”‚
â”‚   â†’ _saveBonusToServer(1,500) â† v27 ì¶”ê°€     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
ìœ ì € "ëŒ€í™” ì¬ê°œ" ë²„íŠ¼ íƒ­
    â†“
addBonusTokens(tokens, isRewardedAd: true)
  â†’ client-sideë§Œ (ConversationWindowManager í™•ì¥)
  â†’ ì„œë²„ RPC ìŠ¤í‚µ (providerì—ì„œ ì´ë¯¸ ì €ì¥ë¨)
    â†“
ì±„íŒ… ê³„ì†
```

**ìˆ˜ìµ ê³„ì‚°:**
- impressionë§Œ: ìˆ˜ì… $0.005 / ë¹„ìš© $0.0019 = **+$0.0031 ì´ë“**
- impression + í´ë¦­: ìˆ˜ì… $0.005 + CPC $0.15~0.50 / ë¹„ìš© $0.0039 = **+$0.15~0.50 ì´ë“**

### ê²½ë¡œ B: í† í° ì†Œì§„ - ì˜ìƒ ê´‘ê³  (Rewarded Video)

```
chatting_tokens >= daily_quota + bonus_tokens + rewarded_tokens_earned
    â†“
checkAndTrigger() â†’ tokenDepleted
    â†“
2ê°œ ë²„íŠ¼ UI í‘œì‹œ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¬ ì˜ìƒ ë³´ê³  5ë²ˆ ëŒ€í™”     â”‚  â† depletedRewardTokensVideo (35,000)
â”‚ ğŸ“‹ ê´‘ê³  ë³´ê³  3ë²ˆ ëŒ€í™”     â”‚  â† depletedRewardTokensNative (21,000)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“ (ìœ ì €ê°€ ì˜ìƒ ì„ íƒ)
showRewardedAd(rewardTokens: 35,000)
    â†“
30ì´ˆ ì˜ìƒ ê´‘ê³  ì „ì²´ ì‹œì²­
    â†“
onUserEarnedReward ì½œë°±
  â†’ trackRewarded(rewardAmount: 35,000)
    â†’ ad_events í…Œì´ë¸” ê¸°ë¡
    â†’ rewarded_tokens_earned += 35,000 (DB)
  â†’ onAdWatched(rewardTokens: 35,000)
    â†“
"ëŒ€í™” ì¬ê°œ (+35,000 í† í° íšë“!)" ë²„íŠ¼
    â†“
addBonusTokens(35,000, isRewardedAd: true)
  â†’ client-sideë§Œ (RPC ìŠ¤í‚µ, trackRewardedê°€ ì´ë¯¸ ê¸°ë¡)
    â†“
5ì™•ë³µ ì¶”ê°€ ì±„íŒ… ê°€ëŠ¥
```

**ìˆ˜ìµ ê³„ì‚°:**
- Rewarded eCPM $20: ìˆ˜ì… $0.020 / ë¹„ìš© 35K Ã— $0.009/7K = $0.045 = **-$0.025 ì ì**
- Rewarded eCPM $50: ìˆ˜ì… $0.050 / ë¹„ìš© $0.045 = **+$0.005 ì´ë“**
- í•˜ì§€ë§Œ ì˜ìƒ ê´‘ê³  í›„ 5ì™•ë³µ â†’ Native impression 2~3ê°œ ì¶”ê°€ ë°œìƒ â†’ ì¶”ê°€ ìˆ˜ì…

### ê²½ë¡œ C: í† í° ì†Œì§„ - ë„¤ì´í‹°ë¸Œ ê´‘ê³ 

```
2ê°œ ë²„íŠ¼ UIì—ì„œ "ğŸ“‹ ê´‘ê³  ë³´ê³  3ë²ˆ ëŒ€í™”" ì„ íƒ
    â†“
loadNativeAd() â†’ Native ê´‘ê³  ë¡œë“œ
    â†“
onAdWatched(rewardTokens: 21,000)
    â†“
"ëŒ€í™” ì¬ê°œ (+21,000 í† í° íšë“!)" ë²„íŠ¼
    â†“
3ì™•ë³µ ì¶”ê°€ ì±„íŒ… ê°€ëŠ¥
```

**ìˆ˜ìµ ê³„ì‚°:**
- Native eCPM $5: ìˆ˜ì… $0.005 / ë¹„ìš© 21K Ã— $0.009/7K = $0.027 = **-$0.022 ì ì**
- í•˜ì§€ë§Œ 3ì™•ë³µ â†’ Native impression 1~2ê°œ ì¶”ê°€ â†’ ì¶”ê°€ ìˆ˜ì…

---

## 3. v27 ìˆ˜ì •ì‚¬í•­ (ë³´ë„ˆìŠ¤ ë¯¸ê¸°ë¡ ë²„ê·¸ ìˆ˜ì •)

### ë¬¸ì œ

| DB ì»¬ëŸ¼ | ê¸°ëŒ€ê°’ | ì‹¤ì œê°’ | ì›ì¸ |
|---------|--------|--------|------|
| `native_impressions` | 86 | 86 | OK (trackNativeImpression ì •ìƒ) |
| `native_clicks` | 12 | 12 | OK (trackNativeClick ì •ìƒ) |
| `bonus_tokens` | 129,000+ | **0** | "ëŒ€í™” ì¬ê°œ" ë²„íŠ¼ ë¯¸í´ë¦­ â†’ RPC ë¯¸í˜¸ì¶œ |
| `ads_watched` | 86+ | **0** | ê°™ì€ ì›ì¸ |
| `rewarded_tokens_earned` | 10,000+ | **0** | trackRewarded ë¹„ë™ê¸° íƒ€ì´ë° ì´ìŠˆ |

### ìˆ˜ì •

**Before (v26):**
```
impression â†’ stateì—ë§Œ í† í° ì €ì¥ â†’ ìœ ì €ê°€ "ëŒ€í™” ì¬ê°œ" í´ë¦­í•´ì•¼ ì„œë²„ ì €ì¥
â†’ ìœ ì €ê°€ ì•ˆ ëˆ„ë¥´ë©´ bonus_tokens = 0 (ì˜ì›íˆ ë¯¸ê¸°ë¡)
```

**After (v27):**
```
impression â†’ stateì— í† í° ì €ì¥ + ì¦‰ì‹œ ì„œë²„ RPC í˜¸ì¶œ
â†’ _saveBonusToServer(1,500) â†’ add_ad_bonus_tokens â†’ bonus_tokens += 1,500
â†’ "ëŒ€í™” ì¬ê°œ" ë²„íŠ¼ì€ client-sideë§Œ (RPC ì¤‘ë³µ ë°©ì§€)
```

### ë³€ê²½ íŒŒì¼

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|------|-----------|
| `conversational_ad_provider.dart` | `_saveBonusToServer()` ë©”ì„œë“œ ì¶”ê°€, `onAdImpression`/`_onAdClicked`ì—ì„œ ì¦‰ì‹œ í˜¸ì¶œ |
| `conversational_ad_widget.dart` | `_handleAdComplete`ì—ì„œ `isRewardedAd: true` ê³ ì • (RPC ì¤‘ë³µ ë°©ì§€) |
| `ad_trigger_service.dart` | `depletedRewardTokensVideo`(35,000) / `depletedRewardTokensNative`(21,000) ìƒìˆ˜ ì¶”ê°€ |

---

## 4. ë¬´í•œ ì±„íŒ… = ì´ë“ì¸ êµ¬ì¡°

### í•µì‹¬ ì›ë¦¬

```
ìœ ì €ê°€ ë” ì±„íŒ…í• ìˆ˜ë¡ â†’ ë” ë§ì€ ê´‘ê³  impression â†’ ë” ë§ì€ ìˆ˜ì…

ë¬´ë£Œ 3íšŒ ì±„íŒ…: ì ì (-$0.027)
ê´‘ê³  4íšŒ impression: ì†ìµë¶„ê¸° (4 Ã— $0.005 = $0.020)
ê´‘ê³  5íšŒ+: í‘ì ì „í™˜

ìœ ì € 1ëª…ì´ í•˜ë£¨ 20íšŒ ì±„íŒ… ì‹œ:
- ë¹„ìš©: 20 Ã— $0.009 = $0.18
- Native impression ~10íšŒ: 10 Ã— $0.005 = $0.05
- Native í´ë¦­ ~2íšŒ: 2 Ã— $0.30 = $0.60
- ì´ ìˆ˜ì…: $0.65
- ìˆœì´ìµ: $0.65 - $0.18 = +$0.47/ì¼
```

### ì™œ ì´ë“ì¸ê°€

1. **impression ë³´ìƒ(1,500)ì€ 0.2íšŒ ì±„íŒ…ë¶„** â†’ ë¹„ìš© $0.0019
2. **impression ìˆ˜ì…ì€ $0.005** â†’ ë§ˆì§„ +$0.003/íšŒ
3. **í´ë¦­ ë³´ìƒ(1,500)ì€ ì¶”ê°€ 0.2íšŒ ì±„íŒ…ë¶„** â†’ ë¹„ìš© $0.0019
4. **í´ë¦­ ìˆ˜ì…ì€ CPC $0.15~$0.50** â†’ ë§ˆì§„ +$0.15~$0.50/íšŒ
5. **maxCount = 9999** â†’ ì œí•œ ì—†ì´ ê³„ì† ì´ë“
6. **interval = 2** â†’ 2ë©”ì‹œì§€ë§ˆë‹¤ ê´‘ê³  â†’ ê³ ë¹ˆë„ ìˆ˜ìµ

### í† í° ì†Œì§„ í›„ ì¬ì¶©ì „ ìˆ˜ìµ

```
í† í° ì†Œì§„ â†’ ì˜ìƒ ê´‘ê³  35,000 í† í° (5ì™•ë³µ)
  â†’ 5ì™•ë³µ ì¤‘ Native impression 2~3íšŒ ì¶”ê°€
  â†’ ì¶”ê°€ ìˆ˜ì… $0.010~$0.015
  â†’ ë‹¤ì‹œ í† í° ì†Œì§„ â†’ ë˜ ì˜ìƒ ê´‘ê³ 
  â†’ ë¬´í•œ ë°˜ë³µ ê°€ëŠ¥ (ë§¤ë²ˆ ì´ë“ ì¶•ì )
```

---

## 5. ì„œë²„ ì¶”ì  íë¦„ (ì „ì²´)

```
[Flutter App]                              [Supabase DB]
    â”‚                                           â”‚
    â”‚  ì±„íŒ… ë©”ì‹œì§€ ì „ì†¡                           â”‚
    â”œâ”€â”€â”€ insert_chat RPC â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º chatting_tokens += 7,000
    â”‚                                           â”‚ (DB Trigger ìë™)
    â”‚                                           â”‚
    â”‚  Native ê´‘ê³  impression                    â”‚
    â”œâ”€â”€â”€ trackNativeImpression â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º native_impressions += 1
    â”œâ”€â”€â”€ _saveBonusToServer(1,500) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º bonus_tokens += 1,500
    â”‚                                           â”‚ ads_watched += 1
    â”‚                                           â”‚
    â”‚  Native ê´‘ê³  í´ë¦­                           â”‚
    â”œâ”€â”€â”€ trackNativeClick â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º native_clicks += 1
    â”œâ”€â”€â”€ _saveBonusToServer(1,500) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º bonus_tokens += 1,500
    â”‚                                           â”‚ ads_watched += 1
    â”‚                                           â”‚
    â”‚  Rewarded ê´‘ê³  ì™„ë£Œ                         â”‚
    â”œâ”€â”€â”€ trackRewarded(35,000) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º rewarded_tokens_earned += 35,000
    â”‚                                           â”‚ rewarded_completes += 1
    â”‚                                           â”‚
    â”‚  is_quota_exceeded ì²´í¬                     â”‚
    â”‚  (GENERATED ì»¬ëŸ¼, ì‹¤ì‹œê°„ ê³„ì‚°)               â”‚
    â”‚  chatting_tokens >= daily_quota             â”‚
    â”‚                   + bonus_tokens            â”‚
    â”‚                   + rewarded_tokens_earned   â”‚
```

---

## 6. Merge í›„ ì¶©ëŒ í•´ê²° ìš”ì•½

### DK-CC (ìš°ë¦¬) vs SONNY (ë¨¸ì§€) ì„¤ì • ë¹„êµ

| í•­ëª© | DK-CC | SONNY ë¬¸ì„œ | ì‹¤ì œ ì½”ë“œ (ìµœì¢…) | ì±„íƒ |
|------|-------|-----------|----------------|------|
| `inlineAdMessageInterval` | 2 | 10 | **2** | DK-CC |
| `inlineAdMaxCount` | 9999 | 10 | **9999** | DK-CC |
| `inlineAdMinMessages` | 2 | 10 | **2** | DK-CC |
| í† í° ì†Œì§„ UI | 1ë²„íŠ¼ | 2ë²„íŠ¼ (ì˜ìƒ/ë„¤ì´í‹°ë¸Œ) | **2ë²„íŠ¼** | SONNY |
| ì˜ìƒ ë³´ìƒ | 3,000 | 35,000 (5ì™•ë³µ) | **35,000** | SONNY |
| ë„¤ì´í‹°ë¸Œ ë³´ìƒ | - | 21,000 (3ì™•ë³µ) | **21,000** | SONNY |
| impression ë³´ìƒ | 1,500 | - | **1,500** | DK-CC |
| í´ë¦­ ë³´ë„ˆìŠ¤ | +1,500 | - | **+1,500** | DK-CC |
| ì„œë²„ ì¦‰ì‹œ ì €ì¥ | ì—†ìŒ | ì—†ìŒ | **_saveBonusToServer** | v27 ì‹ ê·œ |

### ê³µì¡´ ê°€ëŠ¥í•œ ì´ìœ 

- DK-CC: **ê³ ë¹ˆë„ ì†Œì•¡ ë³´ìƒ** (2ë©”ì‹œì§€ë§ˆë‹¤ impression 1,500) â†’ ê¾¸ì¤€í•œ ìˆ˜ì…
- SONNY: **í† í° ì†Œì§„ ì‹œ ëŒ€ëŸ‰ ë³´ìƒ** (ì˜ìƒ 35K / ë„¤ì´í‹°ë¸Œ 21K) â†’ ìœ ì € ë¦¬í…ì…˜
- ë‘ ì „ëµì€ ìƒí˜¸ ë³´ì™„ì :
  1. ë¬´ë£Œ ì¿¼í„° 3íšŒ â†’ DK-CC ì¸í„°ë²Œ ê´‘ê³  (ì†Œì•¡ impression)
  2. ì¿¼í„° ì†Œì§„ â†’ SONNY 2ë²„íŠ¼ UI (ëŒ€ëŸ‰ ë³´ìƒìœ¼ë¡œ ìœ ì € ìœ ì§€)
  3. ì¬ì¶©ì „ í›„ â†’ ë‹¤ì‹œ DK-CC ì¸í„°ë²Œ ê´‘ê³  (ìˆ˜ìµ ì¶•ì )

---

## 7. ì‹¤ì œ DB ì¶”ì  í˜„í™© (2026-02-01)

### ì˜¤ëŠ˜ ì „ì²´ ìœ ì € í•©ì‚°

| í•­ëª© | í•©ê³„ | ìƒíƒœ |
|------|------|------|
| í™œì„± ìœ ì € | 22ëª… | |
| `native_impressions` | 275íšŒ | âœ… ì¶”ì ë¨ |
| `native_clicks` | 17íšŒ (CTR 6.2%) | âœ… ì¶”ì ë¨ |
| `interstitial_shows` | 15íšŒ | âœ… ì¶”ì ë¨ |
| `interstitial_completes` | 15íšŒ | âœ… ì¶”ì ë¨ |
| `rewarded_shows` | 8íšŒ | âœ… ì¶”ì ë¨ |
| `rewarded_completes` | 8íšŒ | âœ… ì¶”ì ë¨ |
| `chatting_tokens` | 314,708 | âœ… ì¶”ì ë¨ |
| `gpt_cost_usd` | $3.30 | âœ… ì¶”ì ë¨ |
| `gemini_cost_usd` | $0.15 | âœ… ì¶”ì ë¨ |
| `rewarded_tokens_earned` | 25,010 | âœ… ì¼ë¶€ ì‘ë™ |
| `bonus_tokens` | 0 (ì „ì›) | âš ï¸ v27 ë°°í¬ í›„ ì‘ë™ ì˜ˆì • |
| `ads_watched` | 0 (ì „ì›) | âš ï¸ v27 ë°°í¬ í›„ ì‘ë™ ì˜ˆì • |

### ì¶”ì  ë²”ìœ„

| ìœ„ì¹˜ | ìœ„ì ¯ | impression ì¶”ì  | bonus_tokens ì €ì¥ | í† í° ë³´ìƒ |
|------|------|----------------|------------------|----------|
| **ì±„íŒ… ë‚´** | `conversational_ad_provider` | âœ… | âœ… (v27) | 1,500 + í´ë¦­ +1,500 |
| ë©”ì¸ í™”ë©´ | `card_native_ad_widget` | âœ… | âŒ (ë¶ˆí•„ìš”) | ì—†ìŒ (ìˆœìˆ˜ ìˆ˜ìµ) |
| ê¸°íƒ€ í™”ë©´ | `native_ad_widget` | âœ… | âŒ (ë¶ˆí•„ìš”) | ì—†ìŒ (ìˆœìˆ˜ ìˆ˜ìµ) |
| ìš´ì„¸ ì´ë™ | `fortune_category_list` | âœ… (interstitial) | âŒ | ì—†ìŒ |
| AI íƒ­ | `main_scaffold` | âœ… (interstitial) | âŒ | ì—†ìŒ |

### ë¹„ìš© ë¶„ì„ (ì˜¤ëŠ˜ ì‹¤ì¸¡)

```
ì´ AI ë¹„ìš©: $3.30 (GPT) + $0.15 (Gemini) = $3.45
ì¶”ì • ê´‘ê³  ìˆ˜ì…:
  Native 275íšŒ Ã— $0.005 = $1.38
  Interstitial 15íšŒ Ã— $0.015 = $0.23
  Rewarded 8íšŒ Ã— $0.020 = $0.16
  í•©ê³„: ~$1.77

ì˜¤ëŠ˜ ì†ìµ: $1.77 - $3.45 = -$1.68 (ì ì)
â†’ GPT ë¹„ìš©($3.30)ì´ ëŒ€ë¶€ë¶„. ì‹ ê·œ ìœ ì € ì‚¬ì£¼ ë¶„ì„ 1íšŒì„± ë¹„ìš©.
â†’ ê¸°ì¡´ ìœ ì €ë§Œì´ë©´: $1.77 - $0.15 = +$1.62 (í‘ì)
```

---

## 8. ë°°í¬ ìƒíƒœ

| í•­ëª© | ìƒíƒœ |
|------|------|
| ì½”ë“œ ìˆ˜ì • (`_saveBonusToServer`) | âœ… ì™„ë£Œ |
| ìƒìˆ˜ ì¶”ê°€ (Video/Native ë³´ìƒ) | âœ… ì™„ë£Œ |
| ë¹Œë“œ (`app-release.aab`) | âœ… ì„±ê³µ (56.1MB) |
| ìŠ¤í† ì–´ ë°°í¬ | â¬œ ëŒ€ê¸° |

## 9. ë‚¨ì€ ì´ìŠˆ

| ì´ìŠˆ | ìƒíƒœ | ì„¤ëª… |
|------|------|------|
| `bonus_tokens` ë¯¸ê¸°ë¡ | **ì½”ë“œ ìˆ˜ì • ì™„ë£Œ, ë°°í¬ ëŒ€ê¸°** | v27 `_saveBonusToServer` â†’ ë°°í¬ í›„ ì¦‰ì‹œ ì‘ë™ |
| `depletedRewardTokensVideo/Native` ìƒìˆ˜ ëˆ„ë½ | **ìˆ˜ì • ì™„ë£Œ** | ad_trigger_service.dartì— ì¶”ê°€ |
| `rewarded_tokens_earned` ê°„í—ì  0 | **ëª¨ë‹ˆí„°ë§ í•„ìš”** | 3ëª…ì€ ì •ìƒ(15K, 5K, 5K), ì¼ë¶€ 0 |
| GPT ë¹„ìš© ë¹„ì¤‘ ë†’ìŒ | **êµ¬ì¡°ì ** | ì‹ ê·œ ìœ ì € $0.22~$0.90/ëª…, ìºì‹± í›„ $0 |

---

**ë¬¸ì„œ ë**
